<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<head>
  <script src="myqueue.js"></script>
  <script src="name_surname_generator.js"></script>
  <link
    rel="stylesheet"
    href="node_modules/bootstrap/dist/css/bootstrap.css"
  />
  <title>Stack</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand" href="#">Задание № 2. Очередь. Инвариантные ряды. Электронная очередь</a>
  <button
    class="navbar-toggler"
    type="button"
    data-toggle="collapse"
    data-target="#navbarSupportedContent"
    aria-controls="navbarSupportedContent"
    aria-expanded="false"
    aria-label="Toggle navigation"
  >
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link" href="index.html"
        >Home <span class="sr-only">(current)</span></a
        >
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Link</a>
      </li>
      <li class="nav-item dropdown">
        <a
          class="nav-link dropdown-toggle"
          href="#"
          id="navbarDropdown"
          role="button"
          data-toggle="dropdown"
          aria-haspopup="true"
          aria-expanded="false"
        >
          Dropdown
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <a class="dropdown-item" href="#">Action</a>
          <a class="dropdown-item" href="#">Another action</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="#">Something else here</a>
        </div>
      </li>
      <li class="nav-item">
        <a class="nav-link disabled" href="#">Disabled</a>
      </li>
    </ul>
    <form class="form-inline my-2 my-lg-0">
      <input
        class="form-control mr-sm-2"
        type="search"
        placeholder="Search"
        aria-label="Search"
      />
      <button class="btn btn-outline-success my-2 my-sm-0" type="submit">
        Search
      </button>
    </form>
  </div>
</nav>
<div>
  <p id="stack_box"></p>
</div>
<input id="newclientbtn" class="btn btn-outline-success" value="New client" 
       style="
       width: 500px;
        height: 50px;
         margin: 0 auto;
          display:flex;
            justify-content: center;"  readonly>
<li class="list-group-item d-flex justify-content-between align-items-center">
  <span id="windowA" class="badge-dark" style="font-size: 30pt">A</span>
  <span id="windowB" class="badge-dark" style="font-size: 30pt">B</span>
  <span id="windowC" class="badge-dark" style="font-size: 30pt">C</span>
</li>
<script>
  let qA = new MyQueue()
  let qB = new MyQueue()
  let qC = new MyQueue()
  let i = 0
  let windows = ['A', 'B', 'C']
  function repeatingFunction(){
    let windowA = document.getElementById("windowA")
    let windowB = document.getElementById("windowB")
    let windowC = document.getElementById("windowC")
    let list = document.getElementById("list")
    if (qA.length || qB.length){
      if (qA.length){
        list.removeChild(list.childNodes[qA.Top()])
        windowA.innerText = "A " + qA.Pop()[0]
      }
      if (qB.length){
        list.removeChild(list.childNodes[qB.Top()])
        windowB.innerText = "B " + qB.Pop()[0]
      }
      if (qC.length){
        list.removeChild(list.childNodes[qC.Top()])
        windowC.innerText = "C " + qC.Pop()[0]
      }
      setTimeout(repeatingFunction, 3000)
    }
    else{
      if (!qA.length) {
        windowA.innerText = "A "
      }
      if (!qB.length){
          windowB.innerText = "B "
        }
      if (!qC.length){
        windowB.innerText = "C "
      }
      setTimeout(repeatingFunction, 3000)
      }
  }
  newclientbtn.onclick = function () {
    let list = document.getElementById("list")
    let current_number = windows[Math.floor(Math.random() * Math.floor(3))]
    let fi = generator()
    switch (current_number) {
      case "A":
        qA.Push(fi, i);
        break;
      case "B":
        qB.Push(fi, i);
        break;
      case "C":
        qC.Push(fi, i);
        break;
    }
    i++
    list.innerHTML +=
      '<li class="list-group-item d-flex justify-content-between align-items-center">' + fi + '<span class="badge badge-dark" style="font-size: 15pt">' + current_number +
      '</span>' + '<span class="badge badge-dark" style="font-size: 15pt">' + i + '</span>' + '</li>'

  }
  setTimeout(repeatingFunction, 3000)
</script>
<ul id="list" class="list-group">
  <li class="list-group-item d-flex justify-content-between align-items-center">
    ФИО клиента
    <span class="badge bg-success rounded-sm" style="font-size: 15pt">Номер окна</span>
    <span class="badge bg-success rounded-sm" style="font-size: 15pt">Порядковый номер</span>
  </li>
</ul>
</body>
</html>
